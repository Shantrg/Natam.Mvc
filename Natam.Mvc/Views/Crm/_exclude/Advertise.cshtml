@model Pro.Data.Entities.AdsView
@{
    Layout = "~/Views/Shared/_View.cshtml";
    Page.Title = "Building";
 }

@section head {
       @Scripts.Render("~/bundles/jqx")
      <link rel="stylesheet" href="~/Scripts/app/app-form.css" type="text/css" />

}

@section scripts {

  <script type="text/javascript">

      $(document).ready(function () {
          @* @if (id <= 0) {
              return;
          }
          JSON.useDateParser();
          var theme = 'Arctic';
          // prepare the data
          var source =
          {
              datatype: "json",
              datafields: [
            { name: 'PropertyId', type: 'number' },
            { name: 'UnitNum', type: 'number' },
            { name: 'AdsOptions', type: 'string' },
            { name: 'AdsDate', type: 'date' },
            { name: 'AgentId', type: 'number' },
            { name: 'Status', type: 'number' },
            { name: 'Description', type: 'string' },
            { name: 'MediaType', type: 'string' }
              ],
              id: 'AdsId',
              type: 'POST',
              url: '@Url.Action("GetBuilding", "Building")'

          };
          source.data = { 'id': '@id' };

          var dataAdapter = new $.jqx.dataAdapter(source, {
              loadComplete: function (record) {
                  // get data records.
                  //var length = records.length;
                  //var record = records[i];
                  $("#PropertyId").val(record.PropertyId);
                  $("#UnitNum").val(record.UnitNum);
                  $("#AdsOptions").val(record.AdsOptions);
                  $("#AdsDate").val(record.AdsDate);
                  $("#AgentId").val(record.AgentId);
                  $("#Status").val(record.Status);

              },
              loadError: function (jqXHR, status, error) {
              },
              beforeLoadComplete: function (records) {

              }
          });
          // perform data binding.
          dataAdapter.dataBind();*@

          //media options
          var mediaSource = [
            "אתר החברה",
            "יד2",
            "עיתונות",
          ];
          // Create a ListBox.
          $("#MediaType").jqxListBox({ source: mediaSource, multiple: true,rtl:true, checkboxes: true, width: '240', height: '80px', theme: 'Arctic' });
          $("#MediaType").jqxListBox('checkIndex', 0);

          //$("#register").jqxExpander({ toggleMode: 'none', width: '300px', showArrow: false });
          $('#sendButton').jqxButton({ });
          //$('#acceptInput').jqxCheckBox({ width: 130 });
          $('#sendButton').on('click', function () {
              $('#form').jqxValidator('validate');
          });
          //$("#PropertyId").jqxInput({rtl:true});
          //$("#UnitNum").jqxInput({ rtl: true });
          //$("#AdsOptions").jqxInput({ rtl: true });
          $("#AdsDate").jqxDateTimeInput({ rtl: true });
          $("#Creation").jqxDateTimeInput({ rtl: true });
          //$("#AgentId").jqxInput({});
          $("#Status").jqxInput({ rtl: true });
          $("#Description").jqxInput({ rtl: true });
          $("#Note").jqxInput({ rtl: true ,width: '300' });
          $("#MediaType").jqxInput({ rtl: true });

          // initialize validator.
          $('#form').jqxValidator({
              hintType: 'label',
              animationDuration: 0,
              rtl:true,
              rules: [
                     { input: '#PropertyId', message: 'נדרש קוד נכס!', action: 'keyup, blur', rule: 'required' },
                     { input: '#Description', message: 'נדרש נוסח מודעה!', action: 'keyup, blur', rule: 'required' }
                     //{ input: '#MediaType', message: 'נדרש מדיה!', action: 'keyup, blur', rule: 'required' }
                     //{
                     //    input: '#AdsDate', message: 'נדרש מועד לפרסום.', action: 'valueChanged', rule: function (input, commit) {
                     //        var date = $('#AdsDate').jqxDateTimeInput('value');
                     //        var result = date.getFullYear() >= 1900 && date.getFullYear() <= 2014;
                     //        // call commit with false, when you are doing server validation and you want to display a validation error on this field. 
                     //        return result;
                     //   }
                     //}
                    ]
          });
         
      });

  </script>
 
}

<div class="clear"></div>

<div class="global-view">
    <div class="container">
        <div class="rtl">
            <h3>פרסום</h3>
        </div>

         @using (Html.BeginForm("AdsUpdate", "Crm", null, FormMethod.Post, new { id = "form", Class = "form" }))
         {
                                 <input id="AdsId" name="AdsId" type="hidden" class="text-mid" value="@Model.AdsId" />


    <div style="max-width:400px">
        <div class="form-group">
            <label class="column">
                קוד נכס:
            </label>
            <input id="PropertyId" name="PropertyId" type="number" readonly class="text-mid" value="@Model.PropertyId" />
        </div>
        <div class="form-group">
            <label class="column">
                כתובת:
            </label>
            <input id="Address" type="text" disabled="disabled" class="text-mid" value="@Model.Address" />
        </div>
        <div class="form-group">
            <label class="column">
                שם בניין:
            </label>
            <input id="BuildingName" type="text" disabled="disabled" class="text-mid" value="@Model.BuildingName" />
        </div>
        <div class="form-group">
            <label class="column">
                מועד רצוי לפרסום:
            </label>
            <div id="AdsDate" name="AdsDate"></div>
        </div>
        <div class="form-group">
            <label class="column">
                סטטוס:
            </label>
            <select name="Status" id="Status">
                <option value="0">ממתין</option>
                <option value="1">בטיפול</option>
            </select>
        </div>
        <div class="form-group">
            <label class="column">
                סוכן:
            </label>
            <input id="AgentId" name="AgentId" type="hidden" class="text-mid" value="@Model.AgentId" />
            <input id="AgentName" type="text" readonly class="text-mid" value="@Model.AgentName" />
        </div>


        <div class="form-group">
            <p>
                ניסוח המודעה:
            </p>
            <textarea id="Description" name="Description" rows="5" cols="60">@Model.Description</textarea>
        </div>
        <div class="form-group">
            <label class="column">
                סוג מדיה:
            </label>
            <br />
            <div id="MediaType" name="MediaType" style="padding:10px"></div>
        </div>
        <div class="form-group">
            <label class="column">
                הערות:
            </label>
            <input id="Note" type="text" class="text-mid" value="@Model.Note" />
        </div>
        <div class="form-group">
            <label class="column">
                תאריך בקשה לפרסום:
            </label>
            <div id="Creation" name="Creation"></div>
        </div>

        <div style="height: 10px"></div>
        <div class="form-group">
            <input id="sendButton" type="submit" value="עדכון" class="btn-default btn2" />
        </div>
    </div>

         }
        </div>
    </div>
 